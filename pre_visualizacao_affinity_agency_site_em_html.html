<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Affinity Agency — Matchmaking Humanizado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Marcellus&display=swap" rel="stylesheet">
  <style>
    :root{--black:#0a0a0a;--gold:#D4AF37;--gold-2:#b28d1e;--silver:#C0C0C0;--white:#fafafa;--muted:#b7b7b7;--glass:rgba(255,255,255,.06);--border:rgba(255,255,255,.12)}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--black);color:var(--white);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .container{width:min(1200px,92%);margin-inline:auto}
    a{color:var(--silver);text-decoration:none}
    a:hover{opacity:.9}
    img{max-width:100%;display:block}
    .site-header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(0,0,0,.9),rgba(0,0,0,.6));backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;gap:12px;align-items:center}
    .brand-badge{width:54px;height:54px;border-radius:12px;border:1px solid var(--border);background:
      radial-gradient(60% 60% at 30% 30%,rgba(255,255,255,.2),transparent 60%),
      linear-gradient(145deg,#e6e6e6,#9a9a9a);position:relative;display:grid;place-items:center}
    .brand-badge:after{content:"";position:absolute;inset:-1px;--g:linear-gradient(45deg,#9b6b00, #ffd87a, #9b6b00);mask:radial-gradient(120% 60% at 50% 0,transparent 42%,#000 43% 56%,transparent 57%) , radial-gradient(120% 60% at 50% 100%,transparent 42%,#000 43% 56%,transparent 57%);background:var(--g);-webkit-mask-composite:destination-over;mask-composite:exclude;opacity:.9;border-radius:12px;mix-blend-mode:overlay}
    .brand-text h1{margin:0;font:700 20px Marcellus,serif;letter-spacing:.5px}
    .brand-text h1 span{color:var(--gold)}
    .brand-text .tagline{margin:0;font-size:12px;color:var(--muted)}
    .nav{display:flex;gap:18px;align-items:center}
    .nav a{font-weight:500}
    .nav .btn{margin-left:8px}
    .nav-toggle{display:none;background:none;color:var(--white);font-size:26px;border:none}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border-radius:999px;border:1px solid transparent;cursor:pointer;font-weight:600;letter-spacing:.2px;transition:.2s}
    .btn:hover{transform:translateY(-1px)}
    .btn-gold{background:linear-gradient(45deg,var(--gold),#f5d76e);color:#2b2b2b}
    .btn-silver{background:linear-gradient(45deg,#eee,var(--silver));color:#222}
    .btn-outline{background:transparent;border-color:var(--border);color:var(--white)}
    .btn-sm{padding:8px 12px;font-size:12px}
    .section{padding:72px 0;position:relative}
    .section-dark{background:radial-gradient(1200px 300px at 50% -40px,rgba(212,175,55,.16),transparent),linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02))}
    .section-title{font:400 34px Marcellus,serif;margin:0 0 20px;letter-spacing:.4px}
    .text-lg{font-size:18px;color:#e9e9e9;line-height:1.6}
    .list-check{list-style:none;padding:0;margin:16px 0;display:grid;gap:8px}
    .list-check li{position:relative;padding-left:24px}
    .list-check li::before{content:"✓";position:absolute;left:0;color:var(--gold)}
    .glass-card{background:var(--glass);border:1px solid var(--border);border-radius:16px;padding:20px}
    .glass-card h4{margin:0 0 8px;font:500 18px Marcellus,serif}
    .shield-row{display:flex;gap:8px;flex-wrap:wrap}
    .shield{border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px;color:#ddd}
    .split{display:grid;grid-template-columns:1.1fr .9fr;gap:28px}
    @media (max-width:950px){.split{grid-template-columns:1fr}}
    .hero{position:relative;min-height:66vh;display:grid;place-items:center;background:#000;overflow:hidden}
    .hero-overlay{position:absolute;inset:0;background:radial-gradient(800px 300px at 20% -20%,rgba(212,175,55,.18),transparent),radial-gradient(900px 300px at 80% 120%,rgba(192,192,192,.18),transparent)}
    .hero-lines{position:absolute;inset:-20% -10%;background-image:
      radial-gradient(ellipse at top, rgba(212,175,55,.08), transparent 60%),
      radial-gradient(ellipse at bottom, rgba(192,192,192,.06), transparent 60%);
      pointer-events:none}
    .hero-inner{text-align:center;position:relative;z-index:1}
    .hero-title{font:400 46px Marcellus,serif;margin:0 0 12px}
    .hero-subtitle{max-width:820px;margin:0 auto 18px;color:#eaeaea;font-weight:300}
    .hero-cta{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    @media (max-width:950px){.grid-3{grid-template-columns:1fr}}
    .card{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:18px;padding:20px}
    .product-illustration{width:100%;height:180px;object-fit:contain;border-radius:14px;margin-bottom:10px;border:1px solid var(--border);background:#0c0c0c}
.product h4{margin:0 0 8px;font:500 20px Marcellus,serif}
    .product .muted{color:var(--muted)}
    .price{font-weight:700;font-size:22px;margin:10px 0;color:var(--gold)}
    .installments{font-size:12px;color:#ddd}
    .product-wide{margin-top:10px}
    .product-wide .wide-inner{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .product .add-to-cart{width:100%}
    .cart-panel{margin-top:24px;border:1px solid var(--border);border-radius:18px;padding:16px;background:rgba(0,0,0,.3)}
    .cart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
    .cart-items{display:grid;gap:10px}
    .cart-item{display:flex;align-items:center;justify-content:space-between;border:1px dashed var(--border);padding:10px;border-radius:12px}
    .cart-footer{display:flex;align-items:center;justify-content:space-between;margin-top:10px;gap:12px;flex-wrap:wrap}
    .tiny{font-size:12px}
    .muted{color:var(--muted)}
    .testimonials{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    @media (max-width:950px){.testimonials{grid-template-columns:1fr}}
    .t-card{border:1px solid var(--border);border-radius:16px;padding:18px;background:rgba(255,255,255,.02)}
    .t-meta{display:flex;align-items:center;justify-content:space-between;margin-top:12px;color:#cfcfcf;font-size:12px}
    .form{display:grid;gap:14px}
    .form-row{display:grid;gap:8px}
    .form-row input,.form-row textarea,.form-row select{background:#121212;border:1px solid var(--border);color:#f5f5f5;border-radius:10px;padding:12px}
    .form-row input:focus,.form-row textarea:focus,.form-row select:focus{outline:1px solid var(--gold)}
    .choices{display:grid;gap:8px;grid-template-columns:repeat(2,1fr)}
    .form-actions{display:flex;gap:10px;flex-wrap:wrap}
    .socials{list-style:none;padding:0;margin:0;display:grid;gap:8px}
    .socials a{padding:10px 14px;border:1px solid var(--border);border-radius:999px;display:inline-block}
    .site-footer{border-top:1px solid var(--border);padding:18px 0;background:#0b0b0b}
    .footer-inner{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:100}
    .modal[aria-hidden="false"]{display:flex}
    .modal-content{background:#0f0f0f;border:1px solid var(--border);max-width:680px;width:min(680px,96%);border-radius:16px;padding:18px;position:relative}
    .modal-lg{max-width:900px}
    .close{position:absolute;right:10px;top:10px;background:#1a1a1a;border:1px solid var(--border);color:#fff;border-radius:999px;width:34px;height:34px;cursor:pointer}
    .dashboard.hidden{display:none}
    .dash-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width:950px){.dash-grid{grid-template-columns:1fr}}
    .brand-logo{width:54px;height:54px;object-fit:contain;border-radius:12px;border:1px solid var(--border);background:#111;padding:4px}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <img class="brand-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAACAAAAASSCAYAAAAlqQ4MAAAQAElEQVR4Aez9CZBs25rXh31rTznVXGce7nzf2N00LdHdQIMYxGxs..." alt="Affinity Agency logo" />
        <div class="brand-text">
          <h1>Affinity <span>Agency</span></h1>
          <p class="tagline">Matchmaking humanizado, discreto e com curadoria</p>
        </div>
      </div>
      <nav class="nav">
        <a href="#inicio">Início</a>
        <a href="#proposito">Propósito</a>
        <a href="#depoimentos">Depoimentos</a>
        <a href="#catalogo">Serviços</a>
        <a href="#eventos">Eventos</a>
        <a href="#area-cliente">Área do Cliente</a>
        <a href="#contato">Contato</a>
        <button class="btn btn-outline" id="btn-login">Entrar</button>
      </nav>
    </div>
  </header>

  <main id="inicio">
    <section class="hero">
      <div class="hero-overlay"></div>
      <div class="container hero-inner">
        <h2 class="hero-title">Encontrar o encontro perfeito para você</h2>
        <p class="hero-subtitle">Por meio de afinidade de perfis — de forma <strong>humanizada</strong> e <strong>discreta</strong>, preservando sua identidade e informações pessoais.</p>
        <div class="hero-cta">
          <a href="#catalogo" class="btn btn-gold">Conhecer Planos</a>
          <a href="#area-cliente" class="btn btn-silver">Responder Questionário</a>
        </div>
      </div>
      <div class="hero-lines"></div>
    </section>

    <section class="section" id="proposito">
      <div class="container split">
        <div>
          <h3 class="section-title">Nosso Propósito</h3>
          <p class="text-lg">A <strong>Affinity Agency</strong> existe para aproximar pessoas compatíveis com <em>carinho</em>, <em>método</em> e <em>discrição</em>. Trabalhamos com curadoria e análise de perfil — combinando psicometria, preferências e objetivos — para conduzir você a conexões que fazem sentido.</p>
          <ul class="list-check">
            <li>Processo sigiloso e seguro</li>
            <li>Curadoria humana com suporte dedicado</li>
            <li>Questionário completo de múltipla escolha</li>
            <li>Eventos e experiências criativas para conhecer pessoas</li>
          </ul>
          <div class="cta-row">
            <a href="#area-cliente" class="btn btn-gold">Acessar Área do Cliente</a>
            <a href="#contato" class="btn btn-outline">Falar com um matchmaker</a>
          </div>
        </div>
        <div class="glass-card">
          <h4>Discrição em primeiro lugar</h4>
          <p>Seu nome, fotos e dados pessoais <strong>não são expostos publicamente</strong>. O contato é mediado pela nossa equipe.</p>
          <div class="shield-row">
            <div class="shield">Sigilo</div>
            <div class="shield">Identidade preservada</div>
            <div class="shield">Dados seguros</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-dark" id="depoimentos">
      <div class="container">
        <h3 class="section-title">Depoimentos</h3>
        <div class="testimonials" id="testimonials">
          <article class="t-card">
            <p>“Fui atendida com muita sensibilidade. Senti segurança no processo e conheci alguém alinhado comigo.”</p>
            <div class="t-meta"><span>— L., 34</span><small>Plano Premium</small></div>
          </article>
          <article class="t-card">
            <p>“Curadoria impecável. Zero exposição, tudo privado. Recomendo para quem preza por discrição.”</p>
            <div class="t-meta"><span>— R., 41</span><small>Plano Simples</small></div>
          </article>
          <article class="t-card">
            <p>“Os encontros coletivos foram leves e assertivos. O coffee break ajudou a quebrar o gelo.”</p>
            <div class="t-meta"><span>— D., 29</span><small>Encontros Coletivos</small></div>
          </article>
        </div>
      </div>
    </section>

    <section class="section" id="catalogo">
      <div class="container">
        <h3 class="section-title">Catálogo de Serviços</h3>
        <div class="grid-3">
          <div class="card product" data-sku="plano-simples" data-price="1600">
            <img class="product-illustration" src="sandbox:/mnt/data/A_digital_image_for_a_matchmaking_service_features.png" alt="Plano Simples — Affinity Agency"/>
            <h4>Plano Simples</h4>
            <p class="muted">Matchmaking com curadoria — anual</p>
            <p class="price">R$ 1.600</p>
            <p class="installments">ou 12x de <span data-installments></span></p>
            <button class="btn btn-gold add-to-cart">Adicionar ao carrinho</button>
          </div>
          <div class="card product" data-sku="plano-premium" data-price="20000">
            <img class="product-illustration" src="sandbox:/mnt/data/A_digital_graphic_design_advertisement_features_th.png" alt="Plano Premium — Affinity Agency"/>
            <h4>Plano Premium</h4>
            <p class="muted">Matchmaking com curadoria — anual</p>
            <p class="price">R$ 20.000</p>
            <p class="installments">ou 12x de <span data-installments></span></p>
            <button class="btn btn-gold add-to-cart">Adicionar ao carrinho</button>
          </div>
          <div class="card product" data-sku="adicional-criativo" data-price="200">
            <img class="product-illustration" src="sandbox:/mnt/data/A_digital_graphic_design_features_promotional_cont.png" alt="Adicional — Encontro Criativo"/>
            <h4>Adicional: Encontro Criativo</h4>
            <p class="muted">Organizado pela agência</p>
            <p class="price">R$ 200</p>
            <p class="installments">ou 12x de <span data-installments></span></p>
            <button class="btn btn-gold add-to-cart">Adicionar ao carrinho</button>
          </div>
        </div>
        <div class="card product product-wide" data-sku="encontros-coletivos" data-price="0">
          <div class="wide-inner">
            <div>
              <h4>Encontros Coletivos com Coffee Break</h4>
              <p class="muted">Valores variam conforme o evento — veja agenda em “Eventos”.</p>
            </div>
            <a href="#eventos" class="btn btn-silver">Ver eventos</a>
          </div>
        </div>
        <div class="cart-panel" id="cart-panel">
          <div class="cart-header">
            <h4>Seu carrinho</h4>
            <button id="clear-cart" class="btn btn-outline btn-sm">Limpar</button>
          </div>
          <div id="cart-items" class="cart-items"></div>
          <div class="cart-footer">
            <div class="totals">
              <div>Total: <strong id="cart-total">R$ 0,00</strong></div>
              <div class="muted">em até 12x de <span id="cart-installments">R$ 0,00</span> sem juros</div>
            </div>
            <button id="checkout" class="btn btn-gold">Finalizar compra</button>
          </div>
          <p class="tiny muted">* Pagamento direto no site (cartão/PIX). Prévia interativa.</p>
        </div>
      </div>
    </section>

    <section class="section section-dark" id="eventos">
      <div class="container">
        <h3 class="section-title">Eventos</h3>
        <div class="grid-3" id="events-grid"></div>
      </div>
    </section>

    <section class="section" id="area-cliente">
      <div class="container split">
        <div>
          <h3 class="section-title">Área do Cliente</h3>
          <p class="text-lg">Faça login para responder o questionário completo, falar com seu matchmaker e acessar extras.</p>
          <div class="cta-row">
            <button class="btn btn-gold" id="open-login">Entrar / Cadastrar</button>
            <button class="btn btn-outline" id="open-dashboard" disabled>Abrir painel</button>
          </div>
          <div id="dashboard" class="dashboard hidden">
            <div class="dash-grid">
              <div class="glass-card">
                <h4>Questionário</h4>
                <p>Responda às perguntas de múltipla escolha para nossa curadoria.</p>
                <button class="btn btn-silver" id="open-questionnaire">Responder</button>
              </div>
              <div class="glass-card">
                <h4>Seu Matchmaker</h4>
                <p>Converse diretamente com o profissional responsável pelo seu perfil.</p>
                <a href="#contato" class="btn btn-outline">Contato direto</a>
              </div>
              <div class="glass-card">
                <h4>Extras adquiridos</h4>
                <ul id="extras-list" class="tiny"></ul>
              </div>
            </div>
          </div>
        </div>
        <div class="glass-card">
          <h4>Segurança de dados</h4>
          <p>Protótipo de pré-visualização. Em produção, utilize autenticação segura e armazenamento criptografado.</p>
        </div>
      </div>
    </section>

    <section class="section section-dark" id="contato">
      <div class="container split">
        <div>
          <h3 class="section-title">Contato</h3>
          <form id="contact-form" class="form">
            <div class="form-row">
              <label>Nome</label>
              <input type="text" name="nome" required />
            </div>
            <div class="form-row">
              <label>Email</label>
              <input type="email" name="email" required />
            </div>
            <div class="form-row">
              <label>Mensagem</label>
              <textarea name="mensagem" rows="5" placeholder="Como podemos ajudar?" required></textarea>
            </div>
            <div class="form-actions">
              <button class="btn btn-gold" type="submit">Enviar</button>
              <a class="btn btn-outline" href="mailto:contato@affinity.agency">Enviar por e-mail</a>
              <a class="btn btn-silver" target="_blank" rel="noopener" href="https://wa.me/5500000000000">WhatsApp</a>
            </div>
          </form>
        </div>
        <div class="glass-card">
          <h4>Redes Sociais</h4>
          <ul class="socials">
            <li><a href="#">Instagram</a></li>
            <li><a href="#">TikTok</a></li>
            <li><a href="#">LinkedIn</a></li>
          </ul>
          <p class="tiny muted">Substitua pelos links reais.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>© <span id="year"></span> Affinity Agency. Todos os direitos reservados.</p>
      <a href="#inicio">Voltar ao topo ↑</a>
    </div>
  </footer>

  <!-- Modais -->
  <div class="modal" id="modal-login" aria-hidden="true">
    <div class="modal-content">
      <button class="close" data-close>&times;</button>
      <h3>Entrar / Cadastrar</h3>
      <form id="login-form" class="form">
        <div class="form-row">
          <label>Email</label>
          <input type="email" id="login-email" required />
        </div>
        <div class="form-row">
          <label>Senha</label>
          <input type="password" id="login-pass" required />
        </div>
        <button class="btn btn-gold" type="submit">Continuar</button>
        <p class="tiny muted">Prévia: autenticação local (sem servidor).</p>
      </form>
    </div>
  </div>

  <div class="modal" id="modal-questionnaire" aria-hidden="true">
    <div class="modal-content modal-lg">
      <button class="close" data-close>&times;</button>
      <h3>Questionário de Compatibilidade</h3>
      <form id="questionnaire-form" class="form form-scroll">
        <div class="form-row">
          <label>Objetivo do relacionamento</label>
          <div class="choices">
            <label><input type="radio" name="objetivo" value="casamento" required/> Casamento</label>
            <label><input type="radio" name="objetivo" value="namoro"/> Namoro</label>
            <label><input type="radio" name="objetivo" value="conhecer-pessoas"/> Conhecer pessoas</label>
          </div>
        </div>
        <div class="form-row">
          <label>Faixa de idade preferida</label>
          <div class="choices">
            <label><input type="radio" name="agegap" value="sem-preferencia" required/> Sem preferência</label>
            <label><input type="radio" name="agegap" value="ate-5"/> Até 5 anos</label>
            <label><input type="radio" name="agegap" value="6-10"/> 6–10 anos</label>
            <label><input type="radio" name="agegap" value="11-plus"/> 11+ anos</label>
          </div>
        </div>
        <div class="form-row">
          <label>Linguagem do amor dominante</label>
          <div class="choices">
            <label><input type="radio" name="love" value="tempo-qualidade" required/> Tempo de qualidade</label>
            <label><input type="radio" name="love" value="atos-servir"/> Atos de serviço</label>
            <label><input type="radio" name="love" value="toque-fisico"/> Toque físico</label>
            <label><input type="radio" name="love" value="palavras-afirmacao"/> Palavras de afirmação</label>
            <label><input type="radio" name="love" value="presentes"/> Presentes</label>
          </div>
        </div>
        <div class="form-row">
          <label>Estilo de comunicação</label>
          <div class="choices">
            <label><input type="radio" name="comms" value="direta" required/> Direta</label>
            <label><input type="radio" name="comms" value="diplomatica"/> Diplomática</label>
            <label><input type="radio" name="comms" value="analitica"/> Analítica</label>
            <label><input type="radio" name="comms" value="emocional"/> Emocional</label>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-gold" type="submit">Enviar respostas</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="modal-checkout" aria-hidden="true">
    <div class="modal-content">
      <button class="close" data-close>&times;</button>
      <h3>Finalizar compra</h3>
      <div id="checkout-summary" class="tiny"></div>
      <form id="checkout-form" class="form">
        <div class="form-row">
          <label>Método de pagamento</label>
          <select id="pay-method">
            <option value="cartao">Cartão (12x sem juros)</option>
            <option value="pix">PIX</option>
          </select>
        </div>
        <div class="form-actions">
          <button class="btn btn-gold" type="submit">Pagar agora</button>
          <p class="tiny muted">Prévia: simula pagamento e salva pedido no navegador.</p>
        </div>
      </form>
    </div>
  </div>

  <script>
    const currency = (n)=> n.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
    const qs = (s,el=document)=> el.querySelector(s);
    const qsa = (s,el=document)=> [...el.querySelectorAll(s)];
    const App={state:{user:null,cart:[],events:[
      {id:'evt-001',title:'Speed Dating Premium',date:'2025-11-15',city:'Balneário Camboriú',price:180},
      {id:'evt-002',title:'Wine & Talk — Singles Night',date:'2025-11-30',city:'Itajaí',price:220},
      {id:'evt-003',title:'Coffee & Chemistry',date:'2025-12-05',city:'Florianópolis',price:150},
    ]},
    init(){
      qsa('.product').forEach(card=>{const price=Number(card.dataset.price||0);const span=qs('[data-installments]',card);if(span){span.textContent=currency(price/12)}});
      qsa('.add-to-cart').forEach(btn=>{btn.addEventListener('click',e=>{const card=e.target.closest('.product');const sku=card.dataset.sku;const price=Number(card.dataset.price||0);const title=qs('h4',card).textContent;App.addToCart({sku,title,price,qty:1});});});
      qs('#clear-cart')?.addEventListener('click',App.clearCart);
      qs('#checkout')?.addEventListener('click',()=>App.openModal('#modal-checkout'));
      qs('#btn-login')?.addEventListener('click',()=>App.openModal('#modal-login'));
      qs('#open-login')?.addEventListener('click',()=>App.openModal('#modal-login'));
      qs('#open-dashboard')?.addEventListener('click',App.showDashboard);
      qs('#open-questionnaire')?.addEventListener('click',()=>App.openModal('#modal-questionnaire'));
      qsa('[data-close]').forEach(x=>x.addEventListener('click',App.closeModalEvt));
      qs('#login-form')?.addEventListener('submit',App.handleLogin);
      qs('#questionnaire-form')?.addEventListener('submit',App.handleQuestionnaire);
      qs('#checkout-form')?.addEventListener('submit',App.handleCheckout);
      qs('#contact-form')?.addEventListener('submit',App.handleContact);
      const saved=JSON.parse(localStorage.getItem('affinity-state')||'{}');
      if(saved.user){App.state.user=saved.user}
      if(saved.cart){App.state.cart=saved.cart}
      if(saved.answers){App.state.answers=saved.answers}
      App.renderCart();App.renderEvents();App.refreshUI();
      const y=new Date().getFullYear();if(qs('#year')) qs('#year').textContent=y;
    },
    persist(){localStorage.setItem('affinity-state',JSON.stringify(App.state));},
    addToCart(item){const ex=App.state.cart.find(x=>x.sku===item.sku);if(ex) ex.qty+=item.qty; else App.state.cart.push(item);App.persist();App.renderCart();},
    removeFromCart(sku){App.state.cart=App.state.cart.filter(x=>x.sku!==sku);App.persist();App.renderCart();},
    clearCart(){App.state.cart=[];App.persist();App.renderCart();},
    renderCart(){const list=qs('#cart-items');if(!list) return;list.innerHTML='';if(App.state.cart.length===0){list.innerHTML='<p class="muted">Seu carrinho está vazio.</p>';} else {App.state.cart.forEach(item=>{const el=document.createElement('div');el.className='cart-item';el.innerHTML=`<div><strong>${item.title}</strong><div class='tiny muted'>SKU: ${item.sku} • Qtd: ${item.qty}</div></div><div style="display:flex;gap:8px;align-items:center"><div>${currency(item.price*item.qty)}</div><button class="btn btn-outline btn-sm" aria-label="remover">Remover</button></div>`;qs('button',el).addEventListener('click',()=>App.removeFromCart(item.sku));list.appendChild(el);});}
      const total=App.state.cart.reduce((s,x)=>s+x.price*x.qty,0);qs('#cart-total').textContent=currency(total);qs('#cart-installments').textContent=currency(total/12);},
    renderEvents(){const wrap=qs('#events-grid');if(!wrap) return;wrap.innerHTML='';App.state.events.forEach(ev=>{const card=document.createElement('div');card.className='card product';card.dataset.sku=ev.id;card.dataset.price=ev.price;card.innerHTML=`<h4>${ev.title}</h4><p class='muted'>${new Date(ev.date).toLocaleDateString('pt-BR')} • ${ev.city}</p><p class='price'>${currency(ev.price)}</p><button class='btn btn-gold'>Adicionar ao carrinho</button>`;qs('button',card).addEventListener('click',()=>App.addToCart({sku:ev.id,title:ev.title,price:ev.price,qty:1}));wrap.appendChild(card);});},
    handleLogin(e){e.preventDefault();const email=qs('#login-email').value.trim().toLowerCase();const pass=qs('#login-pass').value; if(email&&pass){App.state.user={email,name:email.split('@')[0]};App.persist();App.closeModal('#modal-login');App.refreshUI();alert('Login concluído (prévia).');}},
    refreshUI(){const dashBtn=qs('#open-dashboard');if(dashBtn){dashBtn.disabled=!App.state.user} if(App.state.user){qs('#btn-login').textContent='Minha conta'}},
    showDashboard(){if(!App.state.user){return alert('Faça login para abrir o painel.');} qs('#dashboard').classList.remove('hidden');const ul=qs('#extras-list');ul.innerHTML='';const extras=(App.state.orders||[]).flatMap(o=>o.items).filter(i=>i.sku==='adicional-criativo'); if(extras.length===0){ul.innerHTML='<li class="muted">Nenhum extra ativo.</li>';} else {extras.forEach((_,i)=> ul.innerHTML += `<li>Encontro Criativo #${i+1}</li>`);} window.location.hash='#area-cliente';},
    handleQuestionnaire(e){e.preventDefault();const data=new FormData(e.target);const answers=Object.fromEntries(data.entries());App.state.answers=answers;App.persist();App.closeModal('#modal-questionnaire');alert('Respostas enviadas!');},
    openModal(sel){const m=qs(sel);if(m){m.setAttribute('aria-hidden','false');}},
    closeModal(sel){const m=qs(sel);if(m){m.setAttribute('aria-hidden','true');}},
    closeModalEvt(e){App.closeModal('#'+e.target.closest('.modal').id);},
    handleCheckout(e){e.preventDefault();if(App.state.cart.length===0) return alert('Seu carrinho está vazio.');const total=App.state.cart.reduce((s,x)=>s+x.price*x.qty,0);const method=qs('#pay-method').value;const order={id:'ORD-'+Math.random().toString(36).slice(2,8).toUpperCase(),items:JSON.parse(JSON.stringify(App.state.cart)),total,method,at:new Date().toISOString()};App.state.orders=App.state.orders||[];App.state.orders.push(order);App.state.cart=[];App.persist();App.renderCart();App.closeModal('#modal-checkout');alert('Pagamento simulado! Pedido '+order.id+' criado.');},
    handleContact(e){e.preventDefault();const fd=new FormData(e.target);const payload=Object.fromEntries(fd.entries());console.log('Contato:',payload);e.target.reset();alert('Mensagem enviada! (prévia)');},};
    document.addEventListener('DOMContentLoaded',App.init);
  </script>
</body>
</html>
